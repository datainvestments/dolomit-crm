<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>dolomitpulse.ai — CRM</title>
  <link rel="stylesheet" href="styles.css" />
</head><script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="./config.js"></script>
<script defer src="./app.js"></script>
<body>
  <div class="app">
    <header class="topbar">
      <div class="brand">
        <div class="logo">DP</div>
        <div class="brandText">
          <div class="brandTitle">dolomitpulse.ai</div>
          <div class="brandSub" id="brandSub">CRM + мониторинг рынка доломита</div>
        </div>
      </div>

      <div class="topbarRight">
        <div class="pill" id="rolePill">Покупатель</div>

        <select id="langSelect" class="langSelect" aria-label="Language"></select>

        <button class="btn btnGhost" id="btnTheme" type="button">Тема</button>
      </div>
    </header>

    <aside class="sidebar">
      <div class="sidebarSection">
        <div class="sidebarTitle" id="navTitle">Навигация</div>
        <nav class="nav">
          <button class="navItem active" data-view="dashboard">
            <span class="navDot"></span><span id="navDashboard">Дашборд</span>
          </button>
          <button class="navItem" data-view="deals">
            <span class="navDot"></span><span id="navDeals">Сделки</span>
          </button>
          <button class="navItem" data-view="contacts">
            <span class="navDot"></span><span id="navContacts">Контакты</span>
          </button>
          <button class="navItem" data-view="monitoring">
            <span class="navDot"></span><span id="navMonitoring">Мониторинг</span>
          </button>
          <button class="navItem" data-view="referrals">
            <span class="navDot"></span><span id="navReferrals">Рефералы</span>
          </button>
          <button class="navItem" data-view="docs">
            <span class="navDot"></span><span id="navDocs">Документы</span>
          </button>
          <button class="navItem" data-view="ai">
            <span class="navDot"></span><span id="navAI">AI-переписка</span>
          </button>
          <button class="navItem" data-view="settings">
            <span class="navDot"></span><span id="navSettings">Настройки</span>
          </button>
        </nav>
      </div>

      <div class="sidebarSection">
        <div class="sidebarTitle" id="roleTitle">Роль</div>
        <div class="roleGrid">
          <button class="roleBtn active" data-role="buyer" id="roleBuyer">Покупатель</button>
          <button class="roleBtn" data-role="supplier" id="roleSupplier">Поставщик</button>
          <button class="roleBtn" data-role="referral" id="roleReferral">Реферальный партнёр</button>
          <button class="roleBtn" data-role="admin" id="roleAdmin">Админ</button>
        </div>
      </div>

      <div class="sidebarFooter">
        <div class="miniHint" id="miniHint">
          Данные сейчас в браузере (localStorage). Подключение Supabase — следующий этап.
        </div>
      </div>
    </aside>

    <main class="main">
      <section class="hero">
        <div class="heroLeft">
          <div class="hTitle" id="hTitle">Рабочая область DolomitPulse</div>
          <div class="hText" id="hText">
            CRM для доломита: сделки, контакты, рефералы, мониторинг рынка, документы и AI-шаблоны переписки.
          </div>
          <div class="heroActions">
            <button class="btn btnPrimary" id="btnQuickAdd">Быстро добавить</button>
            <button class="btn" id="btnExport">Экспорт JSON</button>
            <label class="btn btnGhost fileLabel">
              <input type="file" id="importFile" accept="application/json" hidden />
              Импорт JSON
            </label>
          </div>
        </div>
        <div class="heroRight">
          <div class="kpiGrid">
            <div class="kpiCard">
              <div class="kpiLabel" id="kpiDealsLabel">Активные сделки</div>
              <div class="kpiValue" id="kpiDeals">0</div>
            </div>
            <div class="kpiCard">
              <div class="kpiLabel" id="kpiContactsLabel">Контакты</div>
              <div class="kpiValue" id="kpiContacts">0</div>
            </div>
            <div class="kpiCard">
              <div class="kpiLabel" id="kpiSignalsLabel">Сигналы мониторинга</div>
              <div class="kpiValue" id="kpiSignals">0</div>
            </div>
            <div class="kpiCard">
              <div class="kpiLabel" id="kpiXPLabel">XP (геймификация)</div>
              <div class="kpiValue" id="kpiXP">0</div>
            </div>
          </div>
        </div>
      </section>

      <section class="content">
        <div class="viewHeader">
          <div class="viewTitle" id="viewTitle">Дашборд</div>
          <div class="viewTools">
            <input class="input" id="searchInput" placeholder="Поиск..." />
          </div>
        </div>

        <div id="viewContainer"></div>
      </section>
    </main>
  </div>

  <script src="app.js"></script>
</body>
</html>
